(function(t,e){"function"==typeof define&&define.amd?define(e):"object"==typeof module&&module.exports?module.exports=e():t.Tobi=e()})(this,function(){"use strict";var t=function(t){var e={},n=window,o=null,i=[],r=0,a=null,d=null,s=null,l=null,c=[],u=null,p=null,b=null,f=null,v=0,m={},h=!1,g=null,y=null,L=null,A=null,_=null,w=!1,E=0,k=function(t){var e={selector:".lightbox",captions:!0,captionsSelector:"img",captionAttribute:"alt",nav:"auto",navText:['<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6" /></svg>','<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6" /></svg>'],navLabel:["Previous","Next"],close:!0,closeText:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18" /><line x1="6" y1="6" x2="18" y2="18" /></svg>',closeLabel:"Close",counter:!0,download:!1,downloadText:"",downloadLabel:"Download",keyboard:!0,zoom:!0,zoomText:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" ><line x1="12" y1="5" x2="12" y2="19" /><line x1="5" y1="12" x2="19" y2="12" /></svg>',docClose:!0,swipeClose:!0,scroll:!1,draggable:!0,threshold:100};return t&&Object.keys(t).forEach(function(n){e[n]=t[n]}),e},x=function(){return"string"==typeof document.documentElement.style.transform?"transform":"WebkitTransform"},C={image:{checkSupport:function(t){return!t.hasAttribute("data-type")&&t.href.match(/\.(png|jpg|tiff|tif|gif|bmp|webp|svg|ico)$/)},init:function(t,n){var o=document.createElement("figure"),i=document.createElement("figcaption"),a=document.createElement("img"),d=t.querySelector("img"),s=document.createElement("div");a.style.opacity="0",d&&(a.alt=d.alt||""),a.setAttribute("src",""),a.setAttribute("data-src",t.href),o.appendChild(a),e.captions&&(i.style.opacity="0","self"===e.captionsSelector&&t.getAttribute(e.captionAttribute)?i.textContent=t.getAttribute(e.captionAttribute):"img"===e.captionsSelector&&d&&d.getAttribute(e.captionAttribute)&&(i.textContent=d.getAttribute(e.captionAttribute)),i.textContent&&(i.id="tobi-figcaption-"+r,o.appendChild(i),a.setAttribute("aria-labelledby",i.id),++r)),n.appendChild(o),s.classList.add("tobi-loader"),n.appendChild(s),n.setAttribute("data-type","image")},onPreload:function(t){C.image.onLoad(t)},onLoad:function(t){var e=t.querySelector("img");if(e.hasAttribute("data-src")){var n=t.querySelector("figcaption"),o=t.querySelector(".tobi-loader");e.onload=function(){t.removeChild(o),e.style.opacity="1",n&&(n.style.opacity="1")},e.setAttribute("src",e.getAttribute("data-src")),e.removeAttribute("data-src")}},onLeave:function(t){}},youtube:{checkSupport:function(t){return tt(t,"youtube")},init:function(t,e){},onPreload:function(t){},onLoad:function(t){},onLeave:function(t){}},iframe:{checkSupport:function(t){return tt(t,"iframe")},init:function(t,e){var n=document.createElement("iframe"),o=t.hasAttribute("href")?t.getAttribute("href"):t.getAttribute("data-target");n.setAttribute("frameborder","0"),n.setAttribute("src",""),n.setAttribute("data-src",o),e.appendChild(n),e.setAttribute("data-type","iframe")},onPreload:function(t){},onLoad:function(t){var e=t.querySelector("iframe");e.setAttribute("src",e.getAttribute("data-src"))},onLeave:function(t){}},html:{checkSupport:function(t){return tt(t,"html")},init:function(t,e){var n=t.hasAttribute("href")?t.getAttribute("href"):t.getAttribute("data-target"),o=document.querySelector(n);return o?(o.classList.add("tobi-html"),e.appendChild(o),void e.setAttribute("data-type","html")):console.log("Ups, I can't find the target "+n+".")},onPreload:function(t){},onLoad:function(t){},onLeave:function(t){var e=t.querySelector("video");e&&e.pause()}}},S=function(t){e=k(t),o=x();var n=document.querySelectorAll(e.selector);return(a=n.length)?(T(),void Array.prototype.forEach.call(n,function(t){X(t)})):console.log("Ups, I can't find the selector "+e.selector+".")},X=function(t,n){if(d||T(),i.indexOf(t)!==-1)return console.log("Element already added to the lightbox.");if(i.push(t),e.zoom&&t.querySelector("img")){var o=document.createElement("div");o.classList.add("tobi-zoom__icon"),o.innerHTML=e.zoomText,t.classList.add("tobi-zoom"),t.appendChild(o)}t.addEventListener("click",function(t){t.preventDefault(),P(i.indexOf(this))}),q(t),n&&(a++,ot()&&(B(),U(),H()))},T=function(){d=document.createElement("div"),d.setAttribute("role","dialog"),d.setAttribute("aria-hidden","true"),d.classList.add("tobi"),s=document.createElement("div"),s.classList.add("tobi__overlay"),d.appendChild(s),l=document.createElement("div"),l.classList.add("tobi__slider"),d.appendChild(l),u=document.createElement("button"),u.classList.add("tobi__prev"),u.setAttribute("type","button"),u.setAttribute("aria-label",e.navLabel[0]),u.innerHTML=e.navText[0],d.appendChild(u),p=document.createElement("button"),p.classList.add("tobi__next"),p.setAttribute("type","button"),p.setAttribute("aria-label",e.navLabel[1]),p.innerHTML=e.navText[1],d.appendChild(p),b=document.createElement("button"),b.classList.add("tobi__close"),b.setAttribute("type","button"),b.setAttribute("aria-label",e.closeLabel),b.innerHTML=e.closeText,d.appendChild(b),f=document.createElement("div"),f.classList.add("tobi__counter"),d.appendChild(f),n.addEventListener("resize",function(){w||(w=!0,n.requestAnimationFrame(function(){U(),w=!1}))}),document.body.appendChild(d)},q=function(t){for(var e in C)if(C.hasOwnProperty(e)&&C[e].checkSupport(t)){var n=document.createElement("div"),o=document.createElement("div");n.classList.add("tobi__slider__slide"),n.style.position="absolute",n.style.left=100*E+"%",o.classList.add("tobi__slider__slide__content"),C[e].init(t,o),n.appendChild(o),l.appendChild(n),c.push(n),++E;break}},P=function(t){return ot()&&!t?console.log("Ups, Tobi is already open."):ot()&&t&&t===v?console.log("Ups, slide "+t+" is already selected."):t>a?console.log("Ups, I can't find slide "+t+"."):(e.scroll||(document.documentElement.classList.add("tobi-is-open"),document.body.classList.add("tobi-is-open")),t||(t=0),!e.nav||1===a||"auto"===e.nav&&"ontouchstart"in window?(u.setAttribute("aria-hidden","true"),p.setAttribute("aria-hidden","true")):(u.setAttribute("aria-hidden","false"),p.setAttribute("aria-hidden","false")),e.counter&&1!==a?f.setAttribute("aria-hidden","false"):f.setAttribute("aria-hidden","true"),e.close||(b.disabled=!1,b.setAttribute("aria-hidden","true")),e.draggable&&(l.style.cursor="-webkit-grab"),g=document.activeElement,v=t,I(),V(),M(v),D(v+1),D(v-1),U(),B(),d.setAttribute("aria-hidden","false"),void H())},Y=function(){return"true"===d.getAttribute("aria-hidden")?console.log("Tobi is already closed"):(e.scroll||(document.documentElement.classList.remove("tobi-is-open"),document.body.classList.remove("tobi-is-open")),Z(),O(),d.setAttribute("aria-hidden","true"),void g.focus())},D=function(t){if(void 0!==c[t]){var e=c[t].querySelector(".tobi__slider__slide__content"),n=e.getAttribute("data-type");C[n].onPreload(e)}},M=function(t){if(void 0!==c[t]){var e=c[t].querySelector(".tobi__slider__slide__content"),n=e.getAttribute("data-type");C[n].onLoad(e)}},j=function(){v!==a-1&&O(),v<a-1&&(v++,U(),B(),H("right"),M(v),D(v+1))},z=function(){v>0&&O(),v>0&&(v--,U(),B(),H("left"),M(v),D(v-1))},O=function(){for(var t=0;t<a;t++){var e=c[t].querySelector(".tobi__slider__slide__content"),n=e.getAttribute("data-type");C[n].onLeave(e)}},U=function(){A=-v*window.innerWidth,l.style[o]="translate3d("+A+"px, 0, 0)",_=A},B=function(){f.textContent=v+1+"/"+a},H=function(t){var n=null;e.nav?(u.disabled=!1,p.disabled=!1,1===a?(u.disabled=!0,p.disabled=!0,e.close&&b.focus()):0===v?u.disabled=!0:v===a-1&&(p.disabled=!0),t||p.disabled?t||!p.disabled||u.disabled?p.disabled||"right"!==t?p.disabled&&"right"===t&&!u.disabled?u.focus():u.disabled||"left"!==t?u.disabled&&"left"===t&&!p.disabled&&p.focus():u.focus():p.focus():u.focus():p.focus()):e.close&&b.focus(),n=d.querySelectorAll("button:not(:disabled)"),y=n[0],L=1===n.length?n[0]:n[n.length-1]},I=function(){m={startX:0,endX:0,startY:0,endY:0}},W=function(){var t=m.endX-m.startX,n=m.endY-m.startY,o=Math.abs(t),i=Math.abs(n);t>0&&o>e.threshold&&v>0?z():t<0&&o>e.threshold&&v!==a-1?j():n<0&&i>e.threshold&&e.swipeClose?Y():U()},F=function(t){t.target===u?z():t.target===p?j():(t.target===b||t.target.classList.contains("tobi__slider__slide")&&!t.target.classList.contains("tobi__slider__slide__content"))&&Y(),t.stopPropagation()},K=function(t){9===t.keyCode?t.shiftKey?document.activeElement===y&&(L.focus(),t.preventDefault()):document.activeElement===L&&(y.focus(),t.preventDefault()):27===t.keyCode?(t.preventDefault(),Y()):37===t.keyCode?(t.preventDefault(),z()):39===t.keyCode&&(t.preventDefault(),j())},N=function(t){t.stopPropagation(),h=!0,m.startX=t.touches[0].pageX,m.startY=t.touches[0].pageY},$=function(t){t.preventDefault(),t.stopPropagation(),h&&(m.endX=t.touches[0].pageX,m.endY=t.touches[0].pageY,l.style[o]="translate3d("+(_-Math.round(m.startX-m.endX))+"px, 0, 0)")},G=function(t){t.stopPropagation(),h=!1,m.endX&&W(),I()},J=function(t){t.preventDefault(),t.stopPropagation(),h=!0,m.startX=t.pageX,m.startY=t.pageY,l.style.cursor="-webkit-grabbing"},Q=function(t){t.preventDefault(),h&&(m.endX=t.pageX,m.endY=t.pageY,l.style[o]="translate3d("+(_-Math.round(m.startX-m.endX))+"px, 0, 0)")},R=function(t){t.stopPropagation(),h=!1,l.style.cursor="-webkit-grab",m.endX&&W(),I()},V=function(){e.keyboard&&document.addEventListener("keydown",K),e.docClose&&d.addEventListener("click",F),u.addEventListener("click",F),p.addEventListener("click",F),b.addEventListener("click",F),e.draggable&&(d.addEventListener("touchstart",N),d.addEventListener("touchmove",$),d.addEventListener("touchend",G),d.addEventListener("mousedown",J),d.addEventListener("mouseup",R),d.addEventListener("mousemove",Q))},Z=function(){e.keyboard&&document.removeEventListener("keydown",K),e.docClose&&d.removeEventListener("click",F),u.removeEventListener("click",F),p.removeEventListener("click",F),b.removeEventListener("click",F),e.draggable&&(d.removeEventListener("touchstart",N),d.removeEventListener("touchmove",$),d.removeEventListener("touchend",G),d.removeEventListener("mousedown",J),d.removeEventListener("mouseup",R),d.removeEventListener("mousemove",Q))},tt=function(t,e){return t.getAttribute("data-type")===e},et=function(t){X(t,!0)},nt=function(){if(l)for(;l.firstChild;)l.removeChild(l.firstChild);i.length=c.length=a=r=E=0},ot=function(){return"false"===d.getAttribute("aria-hidden")};return S(t),{open:P,prev:z,next:j,close:Y,add:et,reset:nt,isOpen:ot,version:"1.7.2"}};return t});