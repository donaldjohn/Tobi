(function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof module&&module.exports?module.exports=t():e.Tobi=t()})(this,function(){"use strict";var e=function(e){var t={},n=null,i=[],o=0,r=null,a=null,s=[],d=0,u={},c=!1,l=null,m=document.createElement("div");m.setAttribute("role","dialog"),m.setAttribute("aria-hidden","true"),m.classList.add("tobi-overlay"),document.getElementsByTagName("body")[0].appendChild(m);var p=document.createElement("div");p.classList.add("tobi-slider"),m.appendChild(p);var g=document.createElement("button");g.setAttribute("type","button"),g.setAttribute("aria-label","Previous"),m.appendChild(g);var b=document.createElement("button");b.setAttribute("type","button"),b.setAttribute("aria-label","Next"),m.appendChild(b);var f=document.createElement("button");f.setAttribute("type","button"),f.setAttribute("aria-label","Close"),m.appendChild(f);var v=document.createElement("div");v.classList.add("tobi-counter"),m.appendChild(v);var h={image:{checkSupport:function(e){return null!=e.href.match(/\.(png|jpg|tiff|tif|gif|bmp|webp|svg|ico)$/)},init:function(e,n){var i=document.createElement("img");if(i.style.opacity="0",e.getElementsByTagName("img")[0]&&e.getElementsByTagName("img")[0].alt?i.alt=e.getElementsByTagName("img")[0].alt:i.alt="",i.setAttribute("src",""),i.setAttribute("data-src",e.href),n.appendChild(i),n.setAttribute("data-type","image"),t.captions){var r=document.createElement("figcaption");r.style.opacity="0","self"===t.captionsSelector&&e.getAttribute(t.captionAttribute)?r.innerHTML=e.getAttribute(t.captionAttribute):"img"===t.captionsSelector&&e.getElementsByTagName("img")[0]&&e.getElementsByTagName("img")[0].getAttribute(t.captionAttribute)&&(r.innerHTML=e.getElementsByTagName("img")[0].getAttribute(t.captionAttribute)),r.innerHTML&&(r.id="tobi-figcaption-"+o,n.appendChild(r),i.setAttribute("aria-labelledby",r.id))}},onPreload:function(e){h.image.onLoad(e)},onLoad:function(e){var t=e.getElementsByTagName("img")[0];if(t.hasAttribute("data-src")){var n=e.getElementsByTagName("figcaption")[0],i=document.createElement("div");i.classList.add("tobi-loader"),e.appendChild(i),t.onload=function(){var i=e.querySelector(".tobi-loader");e.removeChild(i),t.style.opacity="1",n&&(n.style.opacity="1")},t.setAttribute("src",t.getAttribute("data-src")),t.removeAttribute("data-src")}},onLeave:function(e){}},youtube:{checkSupport:function(e){return!(!e.hasAttribute("data-type")||"youtube"!==e.getAttribute("data-type"))},init:function(e,t){},onPreload:function(e){},onLoad:function(e){},onLeave:function(e){}},iframe:{checkSupport:function(e){return!(!e.hasAttribute("data-type")||"iframe"!==e.getAttribute("data-type"))},init:function(e,t){var n=document.createElement("iframe"),i=e.href;n.setAttribute("frameborder","0"),n.setAttribute("src",""),n.setAttribute("data-src",i),t.appendChild(n),t.setAttribute("data-type","iframe")},onPreload:function(e){},onLoad:function(e){var t=e.getElementsByTagName("iframe")[0];t.setAttribute("src",t.getAttribute("data-src"))},onLeave:function(e){}},html:{checkSupport:function(e){return!(!e.hasAttribute("data-type")||"html"!==e.getAttribute("data-type"))},init:function(e,t){var n=document.createElement("div");n.classList.add("tobi-html");var i=e.getAttribute("data-target"),o=document.querySelector(i);return null===o?void console.log("Ups, I can't find the target "+i+"."):(n.innerHTML=o.innerHTML,o.style.display="none",t.appendChild(n),void t.setAttribute("data-type","html"))},onPreload:function(e){},onLoad:function(e){},onLeave:function(e){var t=e.querySelector("video");null!==t&&t.pause()}}},y=function(e){return t=C(e),n=X(),r=document.querySelectorAll(t.selector),(a=r.length)?void[].forEach.call(r,function(e){L(e)}):void console.log("Ups, I can't find the selector "+t.selector+".")},L=function(e){if(i.indexOf(e)===-1){if(i.push(e),e.classList.add("tobi"),t.zoom&&e.getElementsByTagName("img")[0]){var n=document.createElement("div");n.classList.add("tobi__zoom-icon"),n.innerHTML=t.zoomText,e.classList.add("tobi--zoom"),e.appendChild(n)}e.addEventListener("click",function(e){e.preventDefault(),A(i.indexOf(this))}),E(e)}},E=function(e){var n=null,i=null,r=null;n=document.createElement("div"),n.classList.add("tobi-slide"),i=document.createElement("div"),i.classList.add("tobi-figure-wrapper"),r=document.createElement("figure"),r.classList.add("tobi-figure");for(var d in h)if(h[d].checkSupport(e)===!0){h[d].init(e,r);break}i.appendChild(r),n.appendChild(i),p.appendChild(n),s.push(n),++o,!t.nav||1===a||"auto"===t.nav&&"ontouchstart"in window?(g.setAttribute("aria-hidden","true"),b.setAttribute("aria-hidden","true")):(g.setAttribute("aria-hidden","false"),b.setAttribute("aria-hidden","false"),g.innerHTML=t.navText[0],b.innerHTML=t.navText[1]),t.counter&&1!==a?v.setAttribute("aria-hidden","false"):v.setAttribute("aria-hidden","true"),t.close?f.innerHTML=t.closeText:f.setAttribute("aria-hidden","true"),t.draggable&&(p.style.cursor="-webkit-grab")},A=function(e){"false"!==m.getAttribute("aria-hidden")&&(t.scroll||(document.documentElement.classList.add("tobi--is-open"),document.body.classList.add("tobi--is-open")),e||(e=0),l=document.activeElement,d=e,H(),F(),x(d),w(d+1),w(d-1),B(),S(),m.setAttribute("aria-hidden","false"),P())},k=function(){"true"!==m.getAttribute("aria-hidden")&&(t.scroll||(document.documentElement.classList.remove("tobi--is-open"),document.body.classList.remove("tobi--is-open")),G(),m.setAttribute("aria-hidden","true"),l.focus())},w=function(e,t,n){if(void 0!==s[e]){var i=s[e].querySelector("figure"),o=i.getAttribute("data-type");h[o].onPreload(i)}},x=function(e,t,n){if(void 0!==s[e]){var i=s[e].querySelector("figure"),o=i.getAttribute("data-type");h[o].onLoad(i)}},T=function(){for(var e=0;e<s.length;e++){var t=s[e].querySelector("figure"),n=t.getAttribute("data-type");h[n].onLeave(t)}},C=function(e){var t={selector:".lightbox",captions:!0,captionsSelector:"img",captionAttribute:"alt",nav:"auto",navText:['<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6" /></svg>','<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6" /></svg>'],close:!0,closeText:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18" /><line x1="6" y1="6" x2="18" y2="18" /></svg>',counter:!0,keyboard:!0,zoom:!0,zoomText:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" ><line x1="12" y1="5" x2="12" y2="19" /><line x1="5" y1="12" x2="19" y2="12" /></svg>',docClose:!0,swipeClose:!0,scroll:!1,draggable:!0,threshold:20};return e&&Object.keys(e).forEach(function(n){t[n]=e[n]}),t},X=function(){var e=document.documentElement.style;return"string"==typeof e.transform?"transform":"WebkitTransform"},B=function(){var e=100*-d+"%";p.style[n]="translate3d("+e+", 0, 0)"},S=function(){v.innerHTML=d+1+"/"+a},P=function(e){t.nav?(g.disabled=!1,b.disabled=!1,d===a-1?b.disabled=!0:0===d&&(g.disabled=!0),e||b.disabled?e||!b.disabled||g.disabled?b.disabled||"right"!==e?b.disabled&&"right"===e&&!g.disabled?g.focus():g.disabled||"left"!==e?g.disabled&&"left"===e&&!b.disabled&&b.focus():g.focus():b.focus():g.focus():b.focus()):t.close&&f.focus()},M=function(){d!==s.length-1&&T(),d<a-1&&(d++,B(),S(),P("right"),x(d),w(d+1))},N=function(){d>0&&T(),d>0&&(d--,B(),S(),P("left"),x(d),w(d-1))},H=function(){u={startX:0,endX:0,startY:0,endY:0}},Y=function(){var e=u.endX-u.startX,n=u.endY-u.startY,i=Math.abs(e),o=Math.abs(n);e>0&&i>t.threshold?N():e<0&&i>t.threshold?M():n<0&&o>t.threshold&&t.swipeClose&&k()},j=function(e){e.target===g?N():e.target===b?M():(e.target===f||e.target.classList.contains("tobi-figure-wrapper")&&!e.target.classList.contains("tobi-figure"))&&k(),e.stopPropagation()},q=function(e){switch(e.keyCode){case 37:N();break;case 39:M();break;case 27:k()}},z=function(e){e.stopPropagation(),c=!0,u.startX=e.touches[0].pageX,u.startY=e.touches[0].pageY},D=function(e){e.preventDefault(),e.stopPropagation(),c&&(u.endX=e.touches[0].pageX,u.endY=e.touches[0].pageY)},O=function(e){e.stopPropagation(),c=!1,u.endX&&Y(),H()},I=function(e){e.preventDefault(),e.stopPropagation(),c=!0,u.startX=e.pageX,p.style.cursor="-webkit-grabbing"},U=function(e){e.stopPropagation(),c=!1,p.style.cursor="-webkit-grab",u.endX&&Y(),H()},_=function(e){e.preventDefault(),c&&(u.endX=e.pageX,p.style.cursor="-webkit-grabbing")},W=function(e){c&&(c=!1,p.style.cursor="-webkit-grab",u.endX=e.pageX,Y(),H())},$=function(e){"false"!==m.getAttribute("aria-hidden")||m.contains(e.target)||(e.stopPropagation(),P())},F=function(){t.keyboard&&document.addEventListener("keydown",q),t.docClose&&m.addEventListener("click",j),g.addEventListener("click",j),b.addEventListener("click",j),f.addEventListener("click",j),t.draggable&&(m.addEventListener("touchstart",z),m.addEventListener("touchmove",D),m.addEventListener("touchend",O),m.addEventListener("mousedown",I),m.addEventListener("mouseup",U),m.addEventListener("mouseleave",W),m.addEventListener("mousemove",_)),document.addEventListener("focus",$,!0)},G=function(){t.keyboard&&document.removeEventListener("keydown",q),t.docClose&&m.removeEventListener("click",j),g.removeEventListener("click",j),b.removeEventListener("click",j),f.removeEventListener("click",j),t.draggable&&(m.removeEventListener("touchstart",z),m.removeEventListener("touchmove",D),m.removeEventListener("touchend",O),m.removeEventListener("mousedown",I),m.removeEventListener("mouseup",U),m.removeEventListener("mouseleave",W),m.removeEventListener("mousemove",_)),document.removeEventListener("focus",$),T()},J=function(e){L(e),a++};return y(e),{prev:N,next:M,open:A,close:k,add:J}};return e});