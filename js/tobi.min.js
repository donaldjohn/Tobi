(function(t,e){"function"==typeof define&&define.amd?define(e):"object"==typeof module&&module.exports?module.exports=e():t.Tobi=e()})(this,function(){"use strict";var t=function(t){var e={},n=window,i=null,o=[],a=0,r=null,s=null,d=null,l=null,u=null,c=[],p=null,b=null,m=null,f=null,v=0,g={},h=!1,y=null,L=null,A=null,E=null,_=null,w=null,k={image:{checkSupport:function(t){if(!t.hasAttribute("data-type"))return null!=t.href.match(/\.(png|jpg|tiff|tif|gif|bmp|webp|svg|ico)$/)},init:function(t,n){var i=null,o=null;if(i=document.createElement("figure"),o=document.createElement("img"),o.style.opacity="0",t.getElementsByTagName("img")[0]&&t.getElementsByTagName("img")[0].alt?o.alt=t.getElementsByTagName("img")[0].alt:o.alt="",o.setAttribute("src",""),o.setAttribute("data-src",t.href),i.appendChild(o),e.captions){var r=document.createElement("figcaption");r.style.opacity="0","self"===e.captionsSelector&&t.getAttribute(e.captionAttribute)?r.innerHTML=t.getAttribute(e.captionAttribute):"img"===e.captionsSelector&&t.getElementsByTagName("img")[0]&&t.getElementsByTagName("img")[0].getAttribute(e.captionAttribute)&&(r.innerHTML=t.getElementsByTagName("img")[0].getAttribute(e.captionAttribute)),r.innerHTML&&(r.id="tobi-figcaption-"+a,i.appendChild(r),o.setAttribute("aria-labelledby",r.id))}n.appendChild(i),n.setAttribute("data-type","image")},onPreload:function(t){k.image.onLoad(t)},onLoad:function(t){var e=t.getElementsByTagName("img")[0];if(e.hasAttribute("data-src")){var n=t.getElementsByTagName("figcaption")[0],i=document.createElement("div");i.classList.add("tobi-loader"),t.appendChild(i),e.onload=function(){var i=t.querySelector(".tobi-loader");t.removeChild(i),e.style.opacity="1",n&&(n.style.opacity="1")},e.setAttribute("src",e.getAttribute("data-src")),e.removeAttribute("data-src")}},onLeave:function(t){}},youtube:{checkSupport:function(t){return!(!t.hasAttribute("data-type")||"youtube"!==t.getAttribute("data-type"))},init:function(t,e){},onPreload:function(t){},onLoad:function(t){},onLeave:function(t){}},iframe:{checkSupport:function(t){return!(!t.hasAttribute("data-type")||"iframe"!==t.getAttribute("data-type"))},init:function(t,e){var n,i=document.createElement("iframe");n=t.hasAttribute("href")?t.getAttribute("href"):t.getAttribute("data-target"),i.setAttribute("frameborder","0"),i.setAttribute("src",""),i.setAttribute("data-src",n),e.appendChild(i),e.setAttribute("data-type","iframe")},onPreload:function(t){},onLoad:function(t){var e=t.getElementsByTagName("iframe")[0];e.setAttribute("src",e.getAttribute("data-src"))},onLeave:function(t){}},html:{checkSupport:function(t){return!(!t.hasAttribute("data-type")||"html"!==t.getAttribute("data-type"))},init:function(t,e){var n,i,o=document.createElement("div");return o.classList.add("tobi-html"),n=t.hasAttribute("href")?t.getAttribute("href"):t.getAttribute("data-target"),i=document.querySelector(n),null===i?void console.log("Ups, I can't find the target "+n+"."):(o.innerHTML=i.innerHTML,i.style.display="none",e.appendChild(o),void e.setAttribute("data-type","html"))},onPreload:function(t){},onLoad:function(t){},onLeave:function(t){var e=t.querySelector("video");null!==e&&e.pause()}}},x=function(t){return e=D(t),i=H(),C(),r=document.querySelectorAll(e.selector),(s=r.length)?void Array.prototype.forEach.call(r,function(t){T(t)}):void console.log("Ups, I can't find the selector "+e.selector+".")},T=function(t){if(o.indexOf(t)===-1){if(o.push(t),e.zoom&&t.getElementsByTagName("img")[0]){var n=document.createElement("div");n.classList.add("tobi-zoom__icon"),n.innerHTML=e.zoomText,t.classList.add("tobi-zoom"),t.appendChild(n)}t.addEventListener("click",function(t){t.preventDefault(),S(o.indexOf(this))}),X(t)}},C=function(t){d=document.createElement("div"),d.setAttribute("role","dialog"),d.setAttribute("aria-hidden","true"),d.classList.add("tobi"),document.getElementsByTagName("body")[0].appendChild(d);var i=!1;n.addEventListener("resize",function(){i||n.requestAnimationFrame(function(){q(),i=!1}),i=!0}),l=document.createElement("div"),l.classList.add("tobi__overlay"),d.appendChild(l),u=document.createElement("div"),u.classList.add("tobi__slider"),d.appendChild(u),p=document.createElement("button"),p.classList.add("tobi__prev"),p.setAttribute("type","button"),p.setAttribute("aria-label",e.navLabel[0]),p.innerHTML=e.navText[0],d.appendChild(p),b=document.createElement("button"),b.classList.add("tobi__next"),b.setAttribute("type","button"),b.setAttribute("aria-label",e.navLabel[1]),b.innerHTML=e.navText[1],d.appendChild(b),m=document.createElement("button"),m.classList.add("tobi__close"),m.setAttribute("type","button"),m.setAttribute("aria-label",e.closeLabel),m.innerHTML=e.closeText,d.appendChild(m),f=document.createElement("div"),f.classList.add("tobi__counter"),d.appendChild(f)},X=function(t){var e=null,n=null;e=document.createElement("div"),e.classList.add("tobi__slider__slide"),e.style.position="absolute",e.style.left=100*a+"%",n=document.createElement("div"),n.classList.add("tobi__slider__slide__content");for(var i in k)if(k[i].checkSupport(t)===!0){k[i].init(t,n);break}e.appendChild(n),u.appendChild(e),c.push(e),++a},S=function(t){return"false"===d.getAttribute("aria-hidden")?void console.log("Tobi is already open."):(e.scroll||(document.documentElement.classList.add("tobi-is-open"),document.body.classList.add("tobi-is-open")),t||(t=0),!e.nav||1===s||"auto"===e.nav&&"ontouchstart"in window?(p.setAttribute("aria-hidden","true"),b.setAttribute("aria-hidden","true")):(p.setAttribute("aria-hidden","false"),b.setAttribute("aria-hidden","false")),e.counter&&1!==s?f.setAttribute("aria-hidden","false"):f.setAttribute("aria-hidden","true"),e.close||m.setAttribute("aria-hidden","true"),e.draggable&&(u.style.cursor="-webkit-grab"),y=document.activeElement,L=d.querySelectorAll("button"),A=L[0],E=L[L.length-1],v=t,I(),V(),N(v),M(v+1),M(v-1),q(),Y(),d.setAttribute("aria-hidden","false"),void j())},B=function(){"true"!==d.getAttribute("aria-hidden")&&(e.scroll||(document.documentElement.classList.remove("tobi-is-open"),document.body.classList.remove("tobi-is-open")),Z(),P(),d.setAttribute("aria-hidden","true"),y.focus())},M=function(t){if(void 0!==c[t]){var e=c[t].querySelector(".tobi__slider__slide__content"),n=e.getAttribute("data-type");k[n].onPreload(e)}},N=function(t){if(void 0!==c[t]){var e=c[t].querySelector(".tobi__slider__slide__content"),n=e.getAttribute("data-type");k[n].onLoad(e)}},P=function(){for(var t=0;t<s;t++){var e=c[t].querySelector(".tobi__slider__slide__content"),n=e.getAttribute("data-type");k[n].onLeave(e)}},D=function(t){var e={selector:".lightbox",captions:!0,captionsSelector:"img",captionAttribute:"alt",nav:"auto",navText:['<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6" /></svg>','<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6" /></svg>'],navLabel:["Previous","Next"],close:!0,closeText:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18" /><line x1="6" y1="6" x2="18" y2="18" /></svg>',closeLabel:"Close",counter:!0,download:!1,downloadText:"",downloadLabel:"Download",keyboard:!0,zoom:!0,zoomText:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" ><line x1="12" y1="5" x2="12" y2="19" /><line x1="5" y1="12" x2="19" y2="12" /></svg>',docClose:!0,swipeClose:!0,scroll:!1,draggable:!0,threshold:100};return t&&Object.keys(t).forEach(function(n){e[n]=t[n]}),e},H=function(){var t=document.documentElement.style;return"string"==typeof t.transform?"transform":"WebkitTransform"},q=function(){_=-v*window.innerWidth,u.style[i]="translate3d("+_+"px, 0, 0)",w=_},Y=function(){f.innerHTML=v+1+"/"+s},j=function(t){e.nav?(p.disabled=!1,b.disabled=!1,v===s-1?b.disabled=!0:0===v&&(p.disabled=!0),t||b.disabled?t||!b.disabled||p.disabled?b.disabled||"right"!==t?b.disabled&&"right"===t&&!p.disabled?p.focus():p.disabled||"left"!==t?p.disabled&&"left"===t&&!b.disabled&&b.focus():p.focus():b.focus():p.focus():b.focus()):e.close&&m.focus()},z=function(t){v!==s-1&&P(),v<s-1&&(v++,q(),Y(),j("right"),N(v),M(v+1))},O=function(t){v>0&&P(),v>0&&(v--,q(),Y(),j("left"),N(v),M(v-1))},I=function(){g={startX:0,endX:0,startY:0,endY:0}},U=function(){var t=g.endX-g.startX,n=g.endY-g.startY,i=Math.abs(t),o=Math.abs(n);t>0&&i>e.threshold&&v>0?O():t<0&&i>e.threshold&&v!==s-1?z():n<0&&o>e.threshold&&e.swipeClose?B():q()},W=function(t){t.target===p?O():t.target===b?z():(t.target===m||t.target.classList.contains("tobi__slider__slide")&&!t.target.classList.contains("tobi__slider__slide__content"))&&B(),t.stopPropagation()},F=function(t){9===t.keyCode?t.shiftKey?document.activeElement===A&&(E.focus(),t.preventDefault()):document.activeElement===E&&(A.focus(),t.preventDefault()):27===t.keyCode?(t.preventDefault(),B()):37===t.keyCode?(t.preventDefault(),O()):39===t.keyCode&&(t.preventDefault(),z())},K=function(t){t.stopPropagation(),h=!0,g.startX=t.touches[0].pageX,g.startY=t.touches[0].pageY},$=function(t){t.preventDefault(),t.stopPropagation(),h&&(g.endX=t.touches[0].pageX,g.endY=t.touches[0].pageY,u.style[i]="translate3d("+(w-Math.round(g.startX-g.endX))+"px, 0, 0)")},G=function(t){t.stopPropagation(),h=!1,g.endX&&U(),I()},J=function(t){t.preventDefault(),t.stopPropagation(),h=!0,g.startX=t.pageX,u.style.cursor="-webkit-grabbing"},Q=function(t){t.preventDefault(),h&&(g.endX=t.pageX,u.style[i]="translate3d("+(w-Math.round(g.startX-g.endX))+"px, 0, 0)")},R=function(t){t.stopPropagation(),h=!1,u.style.cursor="-webkit-grab",g.endX&&U(),I()},V=function(){e.keyboard&&document.addEventListener("keydown",F),e.docClose&&d.addEventListener("click",W),p.addEventListener("click",W),b.addEventListener("click",W),m.addEventListener("click",W),e.draggable&&(d.addEventListener("touchstart",K),d.addEventListener("touchmove",$),d.addEventListener("touchend",G),d.addEventListener("mousedown",J),d.addEventListener("mouseup",R),d.addEventListener("mousemove",Q))},Z=function(){e.keyboard&&document.removeEventListener("keydown",F),e.docClose&&d.removeEventListener("click",W),p.removeEventListener("click",W),b.removeEventListener("click",W),m.removeEventListener("click",W),e.draggable&&(d.removeEventListener("touchstart",K),d.removeEventListener("touchmove",$),d.removeEventListener("touchend",G),d.removeEventListener("mousedown",J),d.removeEventListener("mouseup",R),d.removeEventListener("mousemove",Q))},tt=function(t){T(t),s++};return x(t),{prev:O,next:z,open:S,close:B,add:tt,version:"1.7.0"}};return t});