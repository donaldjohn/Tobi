(function(t,e){"function"==typeof define&&define.amd?define(e):"object"==typeof module&&module.exports?module.exports=e():t.Tobi=e()})(this,function(){"use strict";var t=function(t){var e={},n=null,i=[],o=0,a=null,r=null,s=[],d=0,l={},u=!1,c=null,f=null,b=null,p=null,m=null,g=document.createElement("div");g.setAttribute("role","dialog"),g.setAttribute("aria-hidden","true"),g.classList.add("tobi-overlay"),document.getElementsByTagName("body")[0].appendChild(g);var v=document.createElement("div");v.classList.add("tobi-slider"),g.appendChild(v);var h=document.createElement("button");h.setAttribute("type","button"),g.appendChild(h);var y=document.createElement("button");y.setAttribute("type","button"),g.appendChild(y);var L=document.createElement("button");L.setAttribute("type","button"),g.appendChild(L);var A=document.createElement("div");A.classList.add("tobi-counter"),g.appendChild(A);var E={image:{checkSupport:function(t){if(!t.hasAttribute("data-type"))return null!=t.href.match(/\.(png|jpg|tiff|tif|gif|bmp|webp|svg|ico)$/)},init:function(t,n){var i=document.createElement("img");if(i.style.opacity="0",t.getElementsByTagName("img")[0]&&t.getElementsByTagName("img")[0].alt?i.alt=t.getElementsByTagName("img")[0].alt:i.alt="",i.setAttribute("src",""),i.setAttribute("data-src",t.href),n.appendChild(i),n.setAttribute("data-type","image"),e.captions){var a=document.createElement("figcaption");a.style.opacity="0","self"===e.captionsSelector&&t.getAttribute(e.captionAttribute)?a.innerHTML=t.getAttribute(e.captionAttribute):"img"===e.captionsSelector&&t.getElementsByTagName("img")[0]&&t.getElementsByTagName("img")[0].getAttribute(e.captionAttribute)&&(a.innerHTML=t.getElementsByTagName("img")[0].getAttribute(e.captionAttribute)),a.innerHTML&&(a.id="tobi-figcaption-"+o,n.appendChild(a),i.setAttribute("aria-labelledby",a.id))}},onPreload:function(t){E.image.onLoad(t)},onLoad:function(t){var e=t.getElementsByTagName("img")[0];if(e.hasAttribute("data-src")){var n=t.getElementsByTagName("figcaption")[0],i=document.createElement("div");i.classList.add("tobi-loader"),t.appendChild(i),e.onload=function(){var i=t.querySelector(".tobi-loader");t.removeChild(i),e.style.opacity="1",n&&(n.style.opacity="1")},e.setAttribute("src",e.getAttribute("data-src")),e.removeAttribute("data-src")}},onLeave:function(t){}},youtube:{checkSupport:function(t){return!(!t.hasAttribute("data-type")||"youtube"!==t.getAttribute("data-type"))},init:function(t,e){},onPreload:function(t){},onLoad:function(t){},onLeave:function(t){}},iframe:{checkSupport:function(t){return!(!t.hasAttribute("data-type")||"iframe"!==t.getAttribute("data-type"))},init:function(t,e){var n,i=document.createElement("iframe");n=t.hasAttribute("href")?t.getAttribute("href"):t.getAttribute("data-target"),i.setAttribute("frameborder","0"),i.setAttribute("src",""),i.setAttribute("data-src",n),e.appendChild(i),e.setAttribute("data-type","iframe")},onPreload:function(t){},onLoad:function(t){var e=t.getElementsByTagName("iframe")[0];e.setAttribute("src",e.getAttribute("data-src"))},onLeave:function(t){}},html:{checkSupport:function(t){return!(!t.hasAttribute("data-type")||"html"!==t.getAttribute("data-type"))},init:function(t,e){var n,i,o=document.createElement("div");return o.classList.add("tobi-html"),n=t.hasAttribute("href")?t.getAttribute("href"):t.getAttribute("data-target"),i=document.querySelector(n),null===i?void console.log("Ups, I can't find the target "+n+"."):(o.innerHTML=i.innerHTML,i.style.display="none",e.appendChild(o),void e.setAttribute("data-type","html"))},onPreload:function(t){},onLoad:function(t){},onLeave:function(t){var e=t.querySelector("video");null!==e&&e.pause()}}},w=function(t){return e=M(t),n=N(),a=document.querySelectorAll(e.selector),(r=a.length)?void[].forEach.call(a,function(t){k(t)}):void console.log("Ups, I can't find the selector "+e.selector+".")},k=function(t){if(i.indexOf(t)===-1){if(i.push(t),t.classList.add("tobi"),e.zoom&&t.getElementsByTagName("img")[0]){var n=document.createElement("div");n.classList.add("tobi__zoom-icon"),n.innerHTML=e.zoomText,t.classList.add("tobi--zoom"),t.appendChild(n)}t.addEventListener("click",function(t){t.preventDefault(),T(i.indexOf(this))}),x(t)}},x=function(t){var n=null,i=null,a=null;n=document.createElement("div"),n.classList.add("tobi-slide"),i=document.createElement("div"),i.classList.add("tobi-figure-wrapper"),a=document.createElement("figure"),a.classList.add("tobi-figure");for(var d in E)if(E[d].checkSupport(t)===!0){E[d].init(t,a);break}i.appendChild(a),n.appendChild(i),v.appendChild(n),s.push(n),++o,!e.nav||1===r||"auto"===e.nav&&"ontouchstart"in window?(h.setAttribute("aria-hidden","true"),y.setAttribute("aria-hidden","true")):(h.setAttribute("aria-hidden","false"),h.setAttribute("aria-label",e.navLabel[0]),h.innerHTML=e.navText[0],y.setAttribute("aria-hidden","false"),y.setAttribute("aria-label",e.navLabel[1]),y.innerHTML=e.navText[1]),e.counter&&1!==r?A.setAttribute("aria-hidden","false"):A.setAttribute("aria-hidden","true"),e.close?(L.setAttribute("aria-label",e.closeLabel),L.innerHTML=e.closeText):L.setAttribute("aria-hidden","true"),e.draggable&&(v.style.cursor="-webkit-grab")},T=function(t){"false"!==g.getAttribute("aria-hidden")&&(e.scroll||(document.documentElement.classList.add("tobi--is-open"),document.body.classList.add("tobi--is-open")),t||(t=0),c=document.activeElement,f=g.querySelectorAll("button"),b=f[0],p=f[f.length-1],d=t,j(),G(),S(d),X(d+1),X(d-1),P(),D(),g.setAttribute("aria-hidden","false"),H())},C=function(){"true"!==g.getAttribute("aria-hidden")&&(e.scroll||(document.documentElement.classList.remove("tobi--is-open"),document.body.classList.remove("tobi--is-open")),J(),B(),g.setAttribute("aria-hidden","true"),c.focus())},X=function(t){if(void 0!==s[t]){var e=s[t].querySelector("figure"),n=e.getAttribute("data-type");E[n].onPreload(e)}},S=function(t){if(void 0!==s[t]){var e=s[t].querySelector("figure"),n=e.getAttribute("data-type");E[n].onLoad(e)}},B=function(){for(var t=0;t<r;t++){var e=s[t].querySelector("figure"),n=e.getAttribute("data-type");E[n].onLeave(e)}},M=function(t){var e={selector:".lightbox",captions:!0,captionsSelector:"img",captionAttribute:"alt",nav:"auto",navText:['<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6" /></svg>','<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6" /></svg>'],navLabel:["Previous","Next"],close:!0,closeText:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18" /><line x1="6" y1="6" x2="18" y2="18" /></svg>',closeLabel:"Close",counter:!0,download:!1,downloadText:"",downloadLabel:"Download",keyboard:!0,zoom:!0,zoomText:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" ><line x1="12" y1="5" x2="12" y2="19" /><line x1="5" y1="12" x2="19" y2="12" /></svg>',docClose:!0,swipeClose:!0,scroll:!1,draggable:!0,threshold:20};return t&&Object.keys(t).forEach(function(n){e[n]=t[n]}),e},N=function(){var t=document.documentElement.style;return"string"==typeof t.transform?"transform":"WebkitTransform"},P=function(){m=-d*window.innerWidth,v.style[n]="translate3d("+m+"px, 0, 0)",v.setAttribute("data-offset",m)},D=function(){A.innerHTML=d+1+"/"+r},H=function(t){e.nav?(h.disabled=!1,y.disabled=!1,d===r-1?y.disabled=!0:0===d&&(h.disabled=!0),t||y.disabled?t||!y.disabled||h.disabled?y.disabled||"right"!==t?y.disabled&&"right"===t&&!h.disabled?h.focus():h.disabled||"left"!==t?h.disabled&&"left"===t&&!y.disabled&&y.focus():h.focus():y.focus():h.focus():y.focus()):e.close&&L.focus()},q=function(){d!==r-1&&B(),d<r-1&&(d++,P(),D(),H("right"),S(d),X(d+1))},Y=function(){d>0&&B(),d>0&&(d--,P(),D(),H("left"),S(d),X(d-1))},j=function(){l={startX:0,endX:0,startY:0,endY:0}},z=function(){var t=l.endX-l.startX,i=l.endY-l.startY,o=Math.abs(t),a=Math.abs(i);t>0&&o>e.threshold&&d>0?Y():t<0&&o>e.threshold&&d!==r-1?q():i<0&&a>e.threshold&&e.swipeClose?C():(m=v.getAttribute("data-offset"),v.style[n]="translate3d("+m+"px, 0, 0)")},O=function(t){t.target===h?Y():t.target===y?q():(t.target===L||t.target.classList.contains("tobi-figure-wrapper")&&!t.target.classList.contains("tobi-figure"))&&C(),t.stopPropagation()},I=function(t){9===t.keyCode?t.shiftKey?document.activeElement===b&&(p.focus(),t.preventDefault()):document.activeElement===p&&(b.focus(),t.preventDefault()):27===t.keyCode?(t.preventDefault(),C()):37===t.keyCode?(t.preventDefault(),Y()):39===t.keyCode&&(t.preventDefault(),q())},U=function(t){t.stopPropagation(),u=!0,l.startX=t.touches[0].pageX,l.startY=t.touches[0].pageY},W=function(t){t.preventDefault(),t.stopPropagation(),u&&(l.endX=t.touches[0].pageX,l.endY=t.touches[0].pageY,m=v.getAttribute("data-offset"),v.style[n]="translate3d("+(m-Math.round(l.startX-l.endX))+"px, 0, 0)")},_=function(t){t.stopPropagation(),u=!1,l.endX&&z(),j()},K=function(t){t.preventDefault(),t.stopPropagation(),u=!0,l.startX=t.pageX,v.style.cursor="-webkit-grabbing"},$=function(t){t.stopPropagation(),u=!1,v.style.cursor="-webkit-grab",l.endX&&z(),j()},F=function(t){t.preventDefault(),u&&(l.endX=t.pageX,v.style.cursor="-webkit-grabbing",m=v.getAttribute("data-offset"),v.style[n]="translate3d("+(m-Math.round(l.startX-l.endX))+"px, 0, 0)")},G=function(){e.keyboard&&document.addEventListener("keydown",I),e.docClose&&g.addEventListener("click",O),h.addEventListener("click",O),y.addEventListener("click",O),L.addEventListener("click",O),e.draggable&&(g.addEventListener("touchstart",U),g.addEventListener("touchmove",W),g.addEventListener("touchend",_),g.addEventListener("mousedown",K),g.addEventListener("mouseup",$),g.addEventListener("mousemove",F))},J=function(){e.keyboard&&document.removeEventListener("keydown",I),e.docClose&&g.removeEventListener("click",O),h.removeEventListener("click",O),y.removeEventListener("click",O),L.removeEventListener("click",O),e.draggable&&(g.removeEventListener("touchstart",U),g.removeEventListener("touchmove",W),g.removeEventListener("touchend",_),g.removeEventListener("mousedown",K),g.removeEventListener("mouseup",$),g.removeEventListener("mousemove",F))},Q=function(t){k(t),r++};return w(t),{prev:Y,next:q,open:T,close:C,add:Q,version:"1.6.4"}};return t});